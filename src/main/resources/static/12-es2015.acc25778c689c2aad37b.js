(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{pbh5:function(e,t,a){"use strict";a.r(t),a.d(t,"HomeModule",function(){return k});var n=a("ofXK"),o=a("tyNb"),i=a("7zfz"),s=a("J7/z"),r=a("TMoa"),c=a("VOEb"),l=a("fXoL"),d=a("WaYN"),b=a("+DzE");const p=function(){return{height:"6px",width:"100%"}};function u(e,t){1&e&&l.Nb(0,"p-progressBar",2),2&e&&l.wc(l.hc(2,p))}function g(e,t){if(1&e&&(l.Sb(0,"div",3),l.Sb(1,"div",4),l.Sb(2,"b"),l.Cc(3,"Nombre: "),l.Rb(),l.Cc(4),l.Rb(),l.Sb(5,"div",4),l.Sb(6,"b"),l.Cc(7,"Definici\xf3n: "),l.Rb(),l.Cc(8),l.Rb(),l.Sb(9,"div",5),l.Sb(10,"b"),l.Cc(11,"Objeto Geografico: "),l.Rb(),l.Nb(12,"i"),l.Rb(),l.Sb(13,"div",5),l.Sb(14,"b"),l.Cc(15,"Escala: "),l.Rb(),l.Cc(16),l.Rb(),l.Sb(17,"div",5),l.Sb(18,"b"),l.Cc(19,"Tipo de archivo: "),l.Rb(),l.Cc(20),l.Rb(),l.Sb(21,"div",6),l.Sb(22,"b"),l.Cc(23,"Fuente de Informaci\xf3n: "),l.Rb(),l.Cc(24),l.Rb(),l.Sb(25,"div",4),l.Sb(26,"b"),l.Cc(27,"Informaci\xf3n de referencia: "),l.Rb(),l.Rb(),l.Sb(28,"div",4),l.Sb(29,"b"),l.Cc(30,"Proyecci\xf3n: "),l.Rb(),l.Cc(31),l.Nb(32,"br"),l.Sb(33,"b"),l.Cc(34,"Elipsoide: "),l.Rb(),l.Cc(35),l.Sb(36,"b"),l.Cc(37,"Datum: "),l.Rb(),l.Cc(38),l.Rb(),l.Rb()),2&e){const e=l.bc();l.Bb(4),l.Ec("",e.response.nombre," "),l.Bb(4),l.Ec("",e.response.definicion," "),l.Bb(4),l.Cb("class",e.response.objeto_geografico),l.Bb(4),l.Ec("",e.response.escala," "),l.Bb(4),l.Ec("",e.response.tipo_archivo," "),l.Bb(4),l.Ec("",e.response.fuente_informacion," "),l.Bb(7),l.Ec("",e.response.proyeccion," "),l.Bb(4),l.Ec("",e.response.elipsoide," "),l.Bb(3),l.Ec("",e.response.datum," ")}}let f=(()=>{class e{constructor(e,t){this.config=e,this.service=t,this.loading=!0,this.layer=this.config.data.layer,this.getData()}ngOnInit(){}getData(){this.service.getXmlData(this.layer.metadataUrl).subscribe(e=>{this.response=e,this.loading=!1},e=>{console.error(e)})}}return e.\u0275fac=function(t){return new(t||e)(l.Mb(s.b),l.Mb(d.a))},e.\u0275cmp=l.Gb({type:e,selectors:[["app-metadata"]],decls:4,vars:2,consts:[["mode","indeterminate",3,"style",4,"ngIf"],["class","p-grid p-fluid",4,"ngIf"],["mode","indeterminate"],[1,"p-grid","p-fluid"],[1,"p-col-12","p-md-6"],[1,"p-col-12","p-md-4"],[1,"p-col-12","p-md-12"]],template:function(e,t){1&e&&(l.Nb(0,"br"),l.Ac(1,u,1,3,"p-progressBar",0),l.Nb(2,"br"),l.Ac(3,g,39,9,"div",1)),2&e&&(l.Bb(1),l.gc("ngIf",t.loading),l.Bb(2),l.gc("ngIf",!t.loading))},directives:[n.j,b.a],styles:["div[_ngcontent-%COMP%]{border:1px solid #000}"]}),e})();var h=a("Gxio"),m=a("dts7"),w=a("EVgl"),v=a("jIHw");function C(e,t){1&e&&(l.Sb(0,"tr"),l.Sb(1,"th"),l.Cc(2," Nombre "),l.Rb(),l.Sb(3,"th"),l.Cc(4," Propietario"),l.Rb(),l.Sb(5,"th",8),l.Cc(6,"Metadato"),l.Rb(),l.Rb())}function y(e,t){if(1&e){const e=l.Tb();l.Sb(0,"button",13),l.Zb("click",function(){l.sc(e);const t=l.bc().rowData;return l.bc().metadataInfo(t)}),l.Rb()}}function S(e,t){if(1&e){const e=l.Tb();l.Sb(0,"tr",9),l.Sb(1,"td"),l.Nb(2,"p-treeTableToggler",10),l.Nb(3,"i"),l.Sb(4,"span",11),l.Zb("click",function(){l.sc(e);const a=t.rowData;return l.bc().navigateToViewer(a)}),l.Cc(5),l.Rb(),l.Rb(),l.Sb(6,"td"),l.Cc(7),l.Rb(),l.Sb(8,"td"),l.Ac(9,y,1,0,"button",12),l.Rb(),l.Rb()}if(2&e){const e=t.$implicit,a=t.rowData;l.gc("ttRow",e)("ttRow",e)("ttSelectableRow",e),l.Bb(2),l.gc("rowNode",e),l.Bb(1),l.Cb("class",a.icon),l.Bb(2),l.Dc(a.name),l.Bb(2),l.Dc(a.owner),l.Bb(2),l.gc("ngIf","layer"===a.object)}}const R=[{path:"",component:(()=>{class e{constructor(e,t,a,n){this.router=e,this.service=t,this.messageService=a,this.dialogService=n,this.optionsFilter=[{name:"Todas las capas",code:null},{name:"Informaci\xf3n Corpocaldas",code:1},{name:"Informaci\xf3n de otras entidades",code:2}],this.eventPage=null,this.loading=!1,this.layers=[]}ngOnInit(){this.msgs=[{severity:"info",summary:"",detail:"En cumplimiento de la  Ley 1712 de 2014 sobre Transparencia y Acceso a la Informaci\xf3n P\xfablica Nacional y la Pol\xedtica Nacional de Datos Abiertos, la Corporaci\xf3n Aut\xf3noma Regional de Caldas, pone a la disposici\xf3n de los usuarios los siguientes datos geogr\xe1ficos para su uso de forma libre, pero garantizando la propiedad intelectual  de conformidad con la Ley 23 de 1982, la Decisi\xf3n Andina 351 de 1993 r\xe9gimen com\xfan sobre derechos de autor y derechos conexos, La ley 44 de 1993 y dem\xe1s normas relacionadas con los derechos de autor."}]}getWorkSpaces(e){this.loading=!0,this.eventPage=e,this.service.getWorkspaces(null,null!==e?e.first/e.rows:null,null!==e?e.rows:null).subscribe(e=>{null!==e.data&&e.data.length>0&&(this.workspaces=this.service.buildTree(e.data),console.log(this.workspaces)),this.totalRecords=e.numberRows,this.loading=!1},e=>{console.error(e),this.messageService.add({severity:"error",summary:"Capas",detail:"Error: "+e.status+" "+e.statusText})})}onNodeExpand(e){if(0===e.node.children.length){this.loading=!0;const t=e.node;this.service.getWorkspace(t.data.id).subscribe(e=>{for(const a of e.layers)a.visible&&t.children.push({data:{id:a.id,name:a.name,metadataUrl:a.metadataUrl,icon:"pi pi-fw pi-map",object:"layer",owner:this.getNameOptionsFilter(a.accessGranted)}});for(const a of e.workspaceChildrens)void 0===t.children.find(e=>e.data.id===a.id)&&t.children.push({data:{id:a.id,name:a.name,icon:"pi pi-fw pi-images",object:"workspace",owner:""},leaf:!a.hasChildren,children:[]});t.children.sort((e,t)=>e.data.name.localeCompare(t.data.name)),this.workspaces=[...this.workspaces],this.loading=!1})}}getLayers(e,t){this.eventPage=e,this.loading=!0,this.valueAccess=t,this.service.getLayers(null!==e&&null!=e.filters.name?e.filters.name.value:null,this.valueAccess,!0,null!==e?e.first/e.rows:null,null!==e?e.rows:null).subscribe(e=>{const t=[];if(null!==e.data&&e.data.length>0)for(const a of e.data){const e=(new r.a).fromJSON(a);t.push(e)}this.layers=t,this.numberOfRows=e.numberRows,this.loading=!1},e=>{console.error(e)})}metadataInfo(e){this.dialogService.open(f,{width:"60%",header:`Metadatos de ${e.name}`,data:{layer:e}})}navigateToViewer(e){"layer"===e.object&&this.router.navigate(["viewer"],{queryParams:{name:e.name}})}guide(){this.dialogService.open(c.a,{header:"Ayuda de Plataforma Virtual SIG-SIR",width:"auto"})}getNameOptionsFilter(e){return this.optionsFilter.find(t=>t.code===e).name}}return e.\u0275fac=function(t){return new(t||e)(l.Mb(o.b),l.Mb(d.a),l.Mb(i.h),l.Mb(s.a))},e.\u0275cmp=l.Gb({type:e,selectors:[["app-home"]],features:[l.Ab([s.a,i.b,i.h])],decls:13,vars:8,consts:[[1,"table"],[3,"value","enableService","valueChange"],[1,"title"],["dataKey","name","tableStyleClass","p-datatable-sm",3,"value","paginator","rows","lazy","totalRecords","loading","onLazyLoad","onNodeExpand"],["pTemplate","header"],["pTemplate","body"],[1,"float",3,"click"],[1,"esri-icon-question","my-float"],[2,"width","150px"],[3,"ttRow","ttSelectableRow"],[3,"rowNode"],[3,"click"],["title","Metadatos","class","p-button-rounded","pButton","","icon","pi pi-fw pi-book",3,"click",4,"ngIf"],["title","Metadatos","pButton","","icon","pi pi-fw pi-book",1,"p-button-rounded",3,"click"]],template:function(e,t){1&e&&(l.Nb(0,"p-toast"),l.Sb(1,"div",0),l.Sb(2,"p-messages",1),l.Zb("valueChange",function(e){return t.msgs=e}),l.Rb(),l.Sb(3,"div",2),l.Sb(4,"h2"),l.Cc(5,"Lista de coberturas"),l.Rb(),l.Rb(),l.Sb(6,"p-treeTable",3),l.Zb("onLazyLoad",function(e){return t.getWorkSpaces(e)})("onNodeExpand",function(e){return t.onNodeExpand(e)}),l.Ac(7,C,7,0,"ng-template",4),l.Ac(8,S,10,8,"ng-template",5),l.Rb(),l.Rb(),l.Sb(9,"a",6),l.Zb("click",function(){return t.guide()}),l.Nb(10,"i",7),l.Sb(11,"span"),l.Cc(12," Ayuda"),l.Rb(),l.Rb()),2&e&&(l.Bb(2),l.gc("value",t.msgs)("enableService",!1),l.Bb(4),l.gc("value",t.workspaces)("paginator",!0)("rows",10)("lazy",!0)("totalRecords",t.totalRecords)("loading",t.loading))},directives:[h.a,m.a,w.c,i.j,w.a,w.b,w.e,n.j,v.b],styles:[".actions[_ngcontent-%COMP%]{width:100px!important}.category[_ngcontent-%COMP%], .date[_ngcontent-%COMP%], .license[_ngcontent-%COMP%], .periodicity[_ngcontent-%COMP%]{width:150px}.entity[_ngcontent-%COMP%], .name[_ngcontent-%COMP%]{width:200px}.table[_ngcontent-%COMP%]{margin:20px}td[_ngcontent-%COMP%]{cursor:pointer}  .p-datatable .p-datatable-tbody>tr>td,   .p-datatable .p-datatable-thead>tr>th{border-width:1px;padding:5px!important}.title[_ngcontent-%COMP%]{padding-left:10px}.float[_ngcontent-%COMP%]{background-color:#567929;border-radius:50px;bottom:40px;box-shadow:2px 2px 3px #999;color:#fff;cursor:pointer;display:flex;flex-direction:row;align-items:center;justify-content:center;height:45px;position:fixed;right:40px;text-align:center;width:90px}.float[_ngcontent-%COMP%]   .my-float[_ngcontent-%COMP%]{font-size:16px;margin-right:5px}.esri-icon-question[_ngcontent-%COMP%]:before{font-size:x-large}"]}),e})()}];let x=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.Kb({type:e}),e.\u0275inj=l.Jb({imports:[[o.e.forChild(R)],o.e]}),e})();var M=a("PCNd"),N=a("rEr+"),P=a("arFO");let O=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.Kb({type:e}),e.\u0275inj=l.Jb({imports:[[n.b]]}),e})(),k=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.Kb({type:e}),e.\u0275inj=l.Jb({imports:[[n.b,x,b.b,v.c,M.a,N.e,P.b,w.d,m.b,O,h.b]]}),e})()}}]);