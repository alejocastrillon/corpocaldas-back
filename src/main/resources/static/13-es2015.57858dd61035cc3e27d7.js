(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{pbh5:function(e,t,a){"use strict";a.r(t),a.d(t,"HomeModule",function(){return f});var n=a("ofXK"),o=a("tyNb"),s=a("7zfz"),r=a("J7/z"),i=a("TMoa"),c=a("fXoL"),l=a("WaYN"),d=a("EVgl");function b(e,t){1&e&&(c.Sb(0,"tr"),c.Sb(1,"th"),c.Cc(2," Nombre "),c.Rb(),c.Rb())}function p(e,t){if(1&e){const e=c.Tb();c.Sb(0,"tr",4),c.Sb(1,"td"),c.Nb(2,"p-treeTableToggler",5),c.Nb(3,"i"),c.Sb(4,"span",6),c.Zb("click",function(){c.sc(e);const a=t.rowData;return c.bc().navigateToViewer(a)}),c.Cc(5),c.Rb(),c.Rb(),c.Rb()}if(2&e){const e=t.$implicit,a=t.rowData;c.gc("ttRow",e)("ttRow",e)("ttSelectableRow",e),c.Bb(2),c.gc("rowNode",e),c.Bb(1),c.Cb("class",a.icon),c.Bb(2),c.Dc(a.name)}}const u=[{path:"",component:(()=>{class e{constructor(e,t,a,n,o){this.router=e,this.service=t,this.dialogService=a,this.confirmService=n,this.messageService=o,this.optionsFilter=[{name:"Todas las capas",code:null},{name:"Informaci\xf3n Corpocaldas",code:1},{name:"Informaci\xf3n de otras entidades",code:2}],this.eventPage=null,this.loading=!1,this.layers=[]}ngOnInit(){}getWorkSpaces(e){this.loading=!0,this.eventPage=e,this.service.getWorkspaces(null,null!==e?e.first/e.rows:null,null!==e?e.rows:null).subscribe(e=>{null!==e.data&&e.data.length>0&&(this.workspaces=this.service.buildTree(e.data)),this.totalRecords=e.numberRows,this.loading=!1},e=>{console.error(e),this.messageService.add({severity:"error",summary:"Capas",detail:"Error: "+e.status+" "+e.statusText})})}onNodeExpand(e){if(0===e.node.children.length){this.loading=!0;const t=e.node;this.service.getWorkspace(t.data.id).subscribe(e=>{for(const a of e.layers)a.visible&&t.children.push({data:{id:a.id,name:a.name,icon:"pi pi-fw pi-map",object:"layer"}});for(const a of e.workspaceChildrens)t.children.push({data:{id:a.id,name:a.name,icon:"pi pi-fw pi-images",object:"workspace"},leaf:!a.hasChildren,children:[]});t.children.sort((e,t)=>e.data.name.localeCompare(t.data.name)),this.workspaces=[...this.workspaces],this.loading=!1})}}getLayers(e,t){this.eventPage=e,this.loading=!0,this.valueAccess=t,this.service.getLayers(null!==e&&null!=e.filters.name?e.filters.name.value:null,this.valueAccess,!0,null!==e?e.first/e.rows:null,null!==e?e.rows:null).subscribe(e=>{let t=[];if(null!==e.data&&e.data.length>0)for(const a of e.data){let e=(new i.a).fromJSON(a);t.push(e)}this.layers=t,this.numberOfRows=e.numberRows,this.loading=!1},e=>{console.error(e)})}navigateToViewer(e){"layer"===e.object&&this.router.navigate(["viewer"],{queryParams:{name:e.name}})}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(o.b),c.Mb(l.a),c.Mb(r.a),c.Mb(s.b),c.Mb(s.h))},e.\u0275cmp=c.Gb({type:e,selectors:[["app-home"]],features:[c.Ab([r.a,s.b,s.h])],decls:4,vars:6,consts:[[1,"table"],["dataKey","name",3,"value","paginator","rows","lazy","totalRecords","loading","onLazyLoad","onNodeExpand"],["pTemplate","header"],["pTemplate","body"],[3,"ttRow","ttSelectableRow"],[3,"rowNode"],[3,"click"]],template:function(e,t){1&e&&(c.Sb(0,"div",0),c.Sb(1,"p-treeTable",1),c.Zb("onLazyLoad",function(e){return t.getWorkSpaces(e)})("onNodeExpand",function(e){return t.onNodeExpand(e)}),c.Ac(2,b,3,0,"ng-template",2),c.Ac(3,p,6,6,"ng-template",3),c.Rb(),c.Rb()),2&e&&(c.Bb(1),c.gc("value",t.workspaces)("paginator",!0)("rows",10)("lazy",!0)("totalRecords",t.totalRecords)("loading",t.loading))},directives:[d.c,s.j,d.a,d.b,d.e],styles:[".actions[_ngcontent-%COMP%]{width:100px!important}.category[_ngcontent-%COMP%], .date[_ngcontent-%COMP%], .license[_ngcontent-%COMP%], .periodicity[_ngcontent-%COMP%]{width:150px}.entity[_ngcontent-%COMP%], .name[_ngcontent-%COMP%]{width:200px}.table[_ngcontent-%COMP%]{margin:20px}td[_ngcontent-%COMP%]{cursor:pointer}  .p-datatable .p-datatable-tbody>tr>td,   .p-datatable .p-datatable-thead>tr>th{border-width:1px;padding:5px!important}"]}),e})()}];let h=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.Kb({type:e}),e.\u0275inj=c.Jb({imports:[[o.e.forChild(u)],o.e]}),e})();var g=a("PCNd"),m=a("rEr+"),w=a("arFO");let f=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.Kb({type:e}),e.\u0275inj=c.Jb({imports:[[n.b,h,g.a,m.e,w.b,d.d]]}),e})()}}]);