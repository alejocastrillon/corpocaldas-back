!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function n(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"8qaN":function(t,o,i){"use strict";i.r(o),i.d(o,"ViewerModule",function(){return X});var a,r,c=i("ofXK"),s=i("tyNb"),l=i("7zfz"),d=i("J7/z"),u=i("3Pt+"),b=i("DJUq"),p=i("fXoL"),m=i("7kUa"),f=((r=function(){function t(n,o,i,a){e(this,t),this.el=n,this.ngModel=o,this.control=i,this.cd=a,this.onResize=new p.n}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.ngModel&&(this.ngModelSubscription=this.ngModel.valueChanges.subscribe(function(){e.updateState()})),this.control&&(this.ngControlSubscription=this.control.valueChanges.subscribe(function(){e.updateState()}))}},{key:"ngAfterViewInit",value:function(){this.autoResize&&this.resize(),this.updateFilledState(),this.cd.detectChanges()}},{key:"onInput",value:function(e){this.updateState()}},{key:"updateFilledState",value:function(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length}},{key:"onFocus",value:function(e){this.autoResize&&this.resize(e)}},{key:"onBlur",value:function(e){this.autoResize&&this.resize(e)}},{key:"resize",value:function(e){this.el.nativeElement.style.height="auto",this.el.nativeElement.style.height=this.el.nativeElement.scrollHeight+"px",parseFloat(this.el.nativeElement.style.height)>=parseFloat(this.el.nativeElement.style.maxHeight)?(this.el.nativeElement.style.overflowY="scroll",this.el.nativeElement.style.height=this.el.nativeElement.style.maxHeight):this.el.nativeElement.style.overflow="hidden",this.onResize.emit(e||{})}},{key:"updateState",value:function(){this.updateFilledState(),this.autoResize&&this.resize()}},{key:"ngOnDestroy",value:function(){this.ngModelSubscription&&this.ngModelSubscription.unsubscribe(),this.ngControlSubscription&&this.ngControlSubscription.unsubscribe()}}]),t}()).\u0275fac=function(e){return new(e||r)(p.Mb(p.l),p.Mb(u.j,8),p.Mb(u.g,8),p.Mb(p.h))},r.\u0275dir=p.Hb({type:r,selectors:[["","pInputTextarea",""]],hostVars:10,hostBindings:function(e,t){1&e&&p.Zb("input",function(e){return t.onInput(e)})("focus",function(e){return t.onFocus(e)})("blur",function(e){return t.onBlur(e)}),2&e&&p.Eb("p-inputtextarea",!0)("p-inputtext",!0)("p-component",!0)("p-filled",t.filled)("p-inputtextarea-resizable",t.autoResize)},inputs:{autoResize:"autoResize"},outputs:{onResize:"onResize"}}),r),h=((a=function t(){e(this,t)}).\u0275fac=function(e){return new(e||a)},a.\u0275mod=p.Kb({type:a}),a.\u0275inj=p.Jb({imports:[[c.b]]}),a),g=i("jIHw");function v(e,t){1&e&&(p.Sb(0,"span"),p.Cc(1," El correo electr\xf3nico es requerido "),p.Rb())}function y(e,t){1&e&&(p.Sb(0,"span"),p.Cc(1," El correo electr\xf3nico es invalido "),p.Rb())}function S(e,t){if(1&e&&(p.Sb(0,"div",21),p.Nb(1,"span",22),p.Ac(2,v,2,0,"span",23),p.Ac(3,y,2,0,"span",23),p.Rb()),2&e){var n=p.bc();p.Bb(2),p.gc("ngIf",n.accessRequestForm.controls.email.errors.required),p.Bb(1),p.gc("ngIf",n.accessRequestForm.controls.email.errors.email)}}function C(e,t){1&e&&(p.Sb(0,"span"),p.Cc(1," El nombre es requerido "),p.Rb())}function R(e,t){if(1&e&&(p.Sb(0,"div",21),p.Nb(1,"span",22),p.Ac(2,C,2,0,"span",23),p.Rb()),2&e){var n=p.bc();p.Bb(2),p.gc("ngIf",n.accessRequestForm.controls.name.errors.required)}}function M(e,t){1&e&&(p.Sb(0,"span"),p.Cc(1," El nombre de la compa\xf1\xeda o entidad es requerido "),p.Rb())}function k(e,t){if(1&e&&(p.Sb(0,"div",21),p.Nb(1,"span",22),p.Ac(2,M,2,0,"span",23),p.Rb()),2&e){var n=p.bc();p.Bb(2),p.gc("ngIf",n.accessRequestForm.controls.company.errors.required)}}function x(e,t){1&e&&(p.Sb(0,"span"),p.Cc(1," La observaci\xf3n es requerida "),p.Rb())}function w(e,t){if(1&e&&(p.Sb(0,"div",21),p.Nb(1,"span",22),p.Ac(2,x,2,0,"span",23),p.Rb()),2&e){var n=p.bc();p.Bb(2),p.gc("ngIf",n.accessRequestForm.controls.description.errors.required)}}var q,O,_=((O=function(){function t(n,o,i){e(this,t),this.formBuilder=n,this.config=o,this.ref=i,this.accessRequest=new b.a,this.accessRequest.idLayer=this.config.data.layer.id,this.accessRequest.nameLayer=this.config.data.layer.name,this.validateForm()}return n(t,[{key:"ngOnInit",value:function(){this.validateForm()}},{key:"validateForm",value:function(){this.accessRequestForm=this.formBuilder.group({email:[this.accessRequest.email,[u.m.required,u.m.email]],name:[this.accessRequest.name,[u.m.required]],company:[this.accessRequest.company,[u.m.required]],description:[this.accessRequest.description,[u.m.required]]})}},{key:"saveAccessRequest",value:function(){console.log(this.accessRequest),this.ref.close(this.accessRequest)}},{key:"cancel",value:function(){this.ref.close(null)}}]),t}()).\u0275fac=function(e){return new(e||O)(p.Mb(u.b),p.Mb(d.b),p.Mb(d.d))},O.\u0275cmp=p.Gb({type:O,selectors:[["app-register-access-request"]],decls:48,vars:10,consts:[[3,"formGroup","ngSubmit"],[1,"p-grid","p-fluid"],[1,"p-field","p-col-12","p-md-12"],[1,"p-inputgroup"],[1,"p-float-label"],["type","email","id","email","autofocus","","formControlName","email","pInputText","",3,"ngModel","ngModelChange"],["for","email"],[1,"p-inputgroup-addon"],[1,"pi","pi-envelope"],["class","error",4,"ngIf"],["type","text","id","name","autofocus","","formControlName","name","pInputText","",3,"ngModel","ngModelChange"],["for","name"],[1,"pi","pi-user"],["type","text","id","company","autofocus","","formControlName","company","pInputText","",3,"ngModel","ngModelChange"],["for","company"],[1,"pi","pi-id-card"],["id","description","rows","5","cols","30","formControlName","description","pInputTextarea","",3,"ngModel","ngModelChange"],["for","description"],[1,"button-container"],["pButton","","icon","pi pi-check","label","Registrar",1,"p-button-rounded","p-button-success",3,"disabled"],["pButton","","icon","pi pi-times","label","Cancelar","type","button",1,"p-button-rounded",3,"click"],[1,"error"],[1,"pi","pi-times","error"],[4,"ngIf"]],template:function(e,t){1&e&&(p.Sb(0,"form",0),p.Zb("ngSubmit",function(){return t.accessRequestForm.valid&&t.saveAccessRequest()}),p.Sb(1,"div",1),p.Sb(2,"div",2),p.Nb(3,"br"),p.Sb(4,"div",3),p.Sb(5,"span",4),p.Sb(6,"input",5),p.Zb("ngModelChange",function(e){return t.accessRequest.email=e}),p.Rb(),p.Sb(7,"label",6),p.Cc(8,"Correo electr\xf3nico"),p.Rb(),p.Sb(9,"span",7),p.Nb(10,"i",8),p.Rb(),p.Rb(),p.Rb(),p.Ac(11,S,4,2,"div",9),p.Rb(),p.Nb(12,"br"),p.Sb(13,"div",2),p.Nb(14,"br"),p.Sb(15,"div",3),p.Sb(16,"span",4),p.Sb(17,"input",10),p.Zb("ngModelChange",function(e){return t.accessRequest.name=e}),p.Rb(),p.Sb(18,"label",11),p.Cc(19,"Nombre"),p.Rb(),p.Sb(20,"span",7),p.Nb(21,"i",12),p.Rb(),p.Rb(),p.Rb(),p.Ac(22,R,3,1,"div",9),p.Rb(),p.Nb(23,"br"),p.Sb(24,"div",2),p.Nb(25,"br"),p.Sb(26,"div",3),p.Sb(27,"span",4),p.Sb(28,"input",13),p.Zb("ngModelChange",function(e){return t.accessRequest.company=e}),p.Rb(),p.Sb(29,"label",14),p.Cc(30,"Nombre de la compa\xf1\xeda o entidad"),p.Rb(),p.Sb(31,"span",7),p.Nb(32,"i",15),p.Rb(),p.Rb(),p.Rb(),p.Ac(33,k,3,1,"div",9),p.Rb(),p.Nb(34,"br"),p.Sb(35,"div",2),p.Nb(36,"br"),p.Sb(37,"div",3),p.Sb(38,"span",4),p.Sb(39,"textarea",16),p.Zb("ngModelChange",function(e){return t.accessRequest.description=e}),p.Rb(),p.Sb(40,"label",17),p.Cc(41,"Observaci\xf3n"),p.Rb(),p.Rb(),p.Rb(),p.Ac(42,w,3,1,"div",9),p.Rb(),p.Nb(43,"br"),p.Sb(44,"div",18),p.Nb(45,"button",19),p.Rb(),p.Sb(46,"div",18),p.Sb(47,"button",20),p.Zb("click",function(){return t.cancel()}),p.Rb(),p.Rb(),p.Rb(),p.Rb()),2&e&&(p.gc("formGroup",t.accessRequestForm),p.Bb(6),p.gc("ngModel",t.accessRequest.email),p.Bb(5),p.gc("ngIf",t.accessRequestForm.controls.email.touched&&t.accessRequestForm.controls.email.dirty&&t.accessRequestForm.controls.email.invalid),p.Bb(6),p.gc("ngModel",t.accessRequest.name),p.Bb(5),p.gc("ngIf",t.accessRequestForm.controls.name.touched&&t.accessRequestForm.controls.name.dirty&&t.accessRequestForm.controls.name.invalid),p.Bb(6),p.gc("ngModel",t.accessRequest.company),p.Bb(5),p.gc("ngIf",t.accessRequestForm.controls.company.touched&&t.accessRequestForm.controls.company.dirty&&t.accessRequestForm.controls.company.invalid),p.Bb(6),p.gc("ngModel",t.accessRequest.description),p.Bb(3),p.gc("ngIf",t.accessRequestForm.controls.description.touched&&t.accessRequestForm.controls.description.dirty&&t.accessRequestForm.controls.description.invalid),p.Bb(3),p.gc("disabled",!t.accessRequestForm.valid))},directives:[u.n,u.i,u.d,u.a,u.h,u.c,m.a,c.j,f,g.a],styles:[".button-container[_ngcontent-%COMP%]{width:48%;margin-left:2%;float:left}.error[_ngcontent-%COMP%]{color:#d32f2f;font-size:small;font-weight:700}"]}),O),P=((q=function(){function t(n){e(this,t),this.ref=n}return n(t,[{key:"ngOnInit",value:function(){}},{key:"close",value:function(e){this.ref.close(e)}}]),t}()).\u0275fac=function(e){return new(e||q)(p.Mb(d.d))},q.\u0275cmp=p.Gb({type:q,selectors:[["app-terms"]],decls:57,vars:0,consts:[[1,"terms"],[1,"body"],[1,"data-table","esri-widget__table"],["colspan","2"],[1,"buttons"],["pButton","","type","button","icon","pi pi-times","label","No Acepto",1,"p-button-warning","p-button-sm",3,"click"],["pButton","","type","button","icon","pi pi-check","label","Acepto",1,"p-button-success","p-button-sm",3,"click"]],template:function(e,t){1&e&&(p.Sb(0,"div",0),p.Sb(1,"div"),p.Sb(2,"h2"),p.Cc(3,"Plataforma Virtual SIG-SIR"),p.Rb(),p.Sb(4,"h4"),p.Cc(5,"T\xe9rminos y Condiciones"),p.Rb(),p.Rb(),p.Sb(6,"div",1),p.Sb(7,"table",2),p.Sb(8,"thead"),p.Sb(9,"tr"),p.Sb(10,"th",3),p.Sb(11,"b"),p.Cc(12,"Datos Generales de la informaci\xf3n entregada"),p.Rb(),p.Rb(),p.Rb(),p.Rb(),p.Sb(13,"tbody"),p.Sb(14,"tr"),p.Sb(15,"td"),p.Cc(16,"Formato"),p.Rb(),p.Sb(17,"td"),p.Cc(18,"Shape"),p.Rb(),p.Rb(),p.Sb(19,"tr"),p.Sb(20,"td"),p.Cc(21,"Origen de Coordenadas"),p.Rb(),p.Sb(22,"td"),p.Cc(23," Proyecci\xf3n: Transverse_Mercator "),p.Nb(24,"br"),p.Cc(25," False_Easting: 1000000,00000000 "),p.Nb(26,"br"),p.Cc(27," False_Northing: 1000000,00000000 "),p.Nb(28,"br"),p.Cc(29," Central_Meridian: -74,08091667 "),p.Nb(30,"br"),p.Cc(31," Scale_Factor: 1,00000000 "),p.Nb(32,"br"),p.Cc(33," Latitude_Of_Origin: 4,59904722 "),p.Nb(34,"br"),p.Cc(35," Unidad Lineal: Meter "),p.Nb(36,"br"),p.Rb(),p.Rb(),p.Sb(37,"tr"),p.Sb(38,"td"),p.Cc(39,"Proyecci\xf3n"),p.Rb(),p.Sb(40,"td"),p.Cc(41,"Colombia_Bogota_Zone"),p.Rb(),p.Rb(),p.Sb(42,"tr"),p.Sb(43,"td"),p.Cc(44,"Sistema de Coordenadas"),p.Rb(),p.Sb(45,"td"),p.Cc(46,"Planas"),p.Rb(),p.Rb(),p.Sb(47,"tr"),p.Sb(48,"td"),p.Cc(49,"EPSG"),p.Rb(),p.Sb(50,"td"),p.Cc(51,"21897"),p.Rb(),p.Rb(),p.Rb(),p.Rb(),p.Sb(52,"p"),p.Cc(53," El usuario solicitante reconoce que la informaci\xf3n a que tenga acceso es de propiedad exclusiva de la Corporaci\xf3n Aut\xf3noma Regional de Caldas \u2013 CORPOCALDAS de conformidad con la ley 23 de 1982, la Decisi\xf3n Andina 351 de 1993 r\xe9gimen com\xfan sobre derechos de autor y derechos conexos, la ley 44 de 1993 y dem\xe1s normas relacionadas con los derechos de autor. Por lo anterior al usuario no le asiste ning\xfan derecho de propiedad intelectual, pudi\xe9ndolos utilizar \xfanicamente para el desarrollo de la presente solicitud, sin que se entiendan cedidos o licenciados a ning\xfan t\xedtulo. De igual forma el usuario deber\xe1 respetar los derechos de autor, para lo cual deber\xe1 realizar las citas correspondientes. "),p.Rb(),p.Rb(),p.Sb(54,"div",4),p.Sb(55,"button",5),p.Zb("click",function(){return t.close(!1)}),p.Rb(),p.Sb(56,"button",6),p.Zb("click",function(){return t.close(!0)}),p.Rb(),p.Rb(),p.Rb())},directives:[g.a],styles:[".body[_ngcontent-%COMP%]{clear:both;margin:10px;overflow-y:auto;padding:10px}.body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:justify}.buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:flex-end}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:5px}.data-table[_ngcontent-%COMP%]{margin-bottom:20px}.data-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center}.esri-widget__table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .esri-widget__table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.1em!important;border:1px solid #ddd}h2[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]{margin:0}table[_ngcontent-%COMP%]{border-collapse:collapse;width:100%}.terms[_ngcontent-%COMP%]{min-width:250px!important;max-width:800px}thead[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f2f2}@media screen and (max-height:823px) and (max-width:411px){.terms[_ngcontent-%COMP%]{width:350px}#body[_ngcontent-%COMP%]{height:510px}}@media screen and (max-height:812px) and (max-width:375px){.terms[_ngcontent-%COMP%]{width:309px}#body[_ngcontent-%COMP%]{height:499px}}@media screen and (max-height:731px) and (max-width:411px){.terms[_ngcontent-%COMP%]{width:350px}#body[_ngcontent-%COMP%]{height:418px}}@media screen and (max-height:736px) and (max-width:414px){.terms[_ngcontent-%COMP%]{width:350px}#body[_ngcontent-%COMP%]{height:423px}}@media screen and (max-height:667px) and (max-width:375px){.terms[_ngcontent-%COMP%]{width:300px}#body[_ngcontent-%COMP%]{height:354px}}@media screen and (max-height:640px) and (max-width:360px){.terms[_ngcontent-%COMP%]{width:300px}#body[_ngcontent-%COMP%]{height:327px}}@media screen and (max-height:568px) and (max-width:320px){.terms[_ngcontent-%COMP%]{width:300px}#body[_ngcontent-%COMP%]{height:255px}}@media screen and (max-height:653px) and (max-width:280px){.terms[_ngcontent-%COMP%]{width:250px}}"]}),q),F=i("WaYN"),N=i("dts7");function I(e,t){1&e&&(p.Sb(0,"span"),p.Cc(1," El correo electr\xf3nico es requerido "),p.Rb())}function A(e,t){1&e&&(p.Sb(0,"span"),p.Cc(1," El correo electr\xf3nico es invalido "),p.Rb())}function B(e,t){if(1&e&&(p.Sb(0,"div",16),p.Nb(1,"span",17),p.Ac(2,I,2,0,"span",18),p.Ac(3,A,2,0,"span",18),p.Rb()),2&e){var n=p.bc();p.Bb(2),p.gc("ngIf",n.verifyForm.controls.email.errors.required),p.Bb(1),p.gc("ngIf",n.verifyForm.controls.email.errors.email)}}function E(e,t){1&e&&(p.Sb(0,"span"),p.Cc(1," El token de acceso es requerido "),p.Rb())}function z(e,t){if(1&e&&(p.Sb(0,"div",16),p.Nb(1,"span",17),p.Ac(2,E,2,0,"span",18),p.Rb()),2&e){var n=p.bc();p.Bb(2),p.gc("ngIf",n.verifyForm.controls.token.errors.required)}}var G,T,D,Z,j=((G=function(){function t(n,o,i,a,r){e(this,t),this.formBuilder=n,this.config=o,this.ref=i,this.service=a,this.messageService=r,this.layerId=this.config.data.layerId}return n(t,[{key:"ngOnInit",value:function(){this.validateForm()}},{key:"validateForm",value:function(){this.verifyForm=this.formBuilder.group({email:[this.email,[u.m.required,u.m.email]],token:[this.token,[u.m.required]]})}},{key:"verifyAccess",value:function(){var e=this;this.service.verifyAccess(this.token,this.email,this.layerId).subscribe(function(t){e.ref.close(t)},function(t){e.messageService.add({severity:"error",summary:"Verificaci\xf3n de token",detail:"Token invalido"}),console.error(t)})}},{key:"cancel",value:function(){this.ref.close()}}]),t}()).\u0275fac=function(e){return new(e||G)(p.Mb(u.b),p.Mb(d.b),p.Mb(d.d),p.Mb(F.a),p.Mb(l.h))},G.\u0275cmp=p.Gb({type:G,selectors:[["app-verify-access-token"]],features:[p.Ab([l.h])],decls:28,vars:6,consts:[[3,"formGroup","ngSubmit"],[1,"p-g","p-fluid"],[1,"p-field","p-col-12","p-md-12"],[1,"p-inputgroup"],[1,"p-float-label"],["type","email","id","email","autofocus","","formControlName","email","pInputText","",3,"ngModel","ngModelChange"],["for","email"],[1,"p-inputgroup-addon"],[1,"pi","pi-user"],["class","error",4,"ngIf"],["type","text","id","token","autofocus","","formControlName","token","pInputText","",3,"ngModel","ngModelChange"],["for","token"],[1,"pi","pi-unlock"],[1,"button-container"],["pButton","","icon","pi pi-check","label","Verificar",1,"p-button-rounded","p-button-success",3,"disabled"],["pButton","","icon","pi pi-times","label","Cancelar","type","button",1,"p-button-rounded",3,"click"],[1,"error"],[1,"pi","pi-times","error"],[4,"ngIf"]],template:function(e,t){1&e&&(p.Nb(0,"p-messages"),p.Sb(1,"form",0),p.Zb("ngSubmit",function(){return t.verifyForm.valid&&t.verifyAccess()}),p.Sb(2,"div",1),p.Sb(3,"div",2),p.Nb(4,"br"),p.Sb(5,"div",3),p.Sb(6,"span",4),p.Sb(7,"input",5),p.Zb("ngModelChange",function(e){return t.email=e}),p.Rb(),p.Sb(8,"label",6),p.Cc(9,"Correo electr\xf3nico"),p.Rb(),p.Sb(10,"span",7),p.Nb(11,"i",8),p.Rb(),p.Rb(),p.Rb(),p.Ac(12,B,4,2,"div",9),p.Rb(),p.Nb(13,"br"),p.Sb(14,"div",2),p.Sb(15,"div",3),p.Sb(16,"span",4),p.Sb(17,"input",10),p.Zb("ngModelChange",function(e){return t.token=e}),p.Rb(),p.Sb(18,"label",11),p.Cc(19,"Token de acceso"),p.Rb(),p.Sb(20,"span",7),p.Nb(21,"i",12),p.Rb(),p.Rb(),p.Rb(),p.Ac(22,z,3,1,"div",9),p.Rb(),p.Nb(23,"br"),p.Sb(24,"div",13),p.Nb(25,"button",14),p.Rb(),p.Sb(26,"div",13),p.Sb(27,"button",15),p.Zb("click",function(){return t.cancel()}),p.Rb(),p.Rb(),p.Rb(),p.Rb()),2&e&&(p.Bb(1),p.gc("formGroup",t.verifyForm),p.Bb(6),p.gc("ngModel",t.email),p.Bb(5),p.gc("ngIf",t.verifyForm.controls.email.touched&&t.verifyForm.controls.email.dirty&&t.verifyForm.controls.email.invalid),p.Bb(5),p.gc("ngModel",t.token),p.Bb(5),p.gc("ngIf",t.verifyForm.controls.token.touched&&t.verifyForm.controls.token.dirty&&t.verifyForm.controls.token.invalid),p.Bb(3),p.gc("disabled",!t.verifyForm.valid))},directives:[N.a,u.n,u.i,u.d,u.a,u.h,u.c,m.a,c.j,g.a],styles:[".button-container[_ngcontent-%COMP%]{width:48%;margin-left:2%;float:left}.error[_ngcontent-%COMP%]{color:#d32f2f;font-size:small;font-weight:700}"]}),G),U=i("AytR"),J=i("Nf9I"),V=i("Gxio"),H=[{path:"",component:(T=function(){function t(n,o,i,a,r){var c=this;e(this,t),this.route=n,this.service=o,this.confirmService=i,this.messageService=a,this.dialogService=r,this.geoServer=U.a.geoServer,this.route.queryParams.subscribe(function(e){c.name=e.name,c.getLayerInfo()})}return n(t,[{key:"ngOnInit",value:function(){this.initializeMap(),this.addControls()}},{key:"addControls",value:function(){this.addScaleControl(),this.addSearchControl(),this.addZoomControl(),this.addBackControl(),this.addDownloadControl()}},{key:"addBackControl",value:function(){var e=L.control({position:"topleft"});e.onAdd=function(){var e=L.DomUtil.create("button","btn-control");e.classList.add("leaflet-control","leaflet-control-layers"),e.title="Volver",e.addEventListener("click",function(){window.history.back()});var t=document.createElement("i");return t.classList.add("pi","pi-arrow-circle-left"),e.appendChild(t),e},e.addTo(this.map)}},{key:"addLogoControl",value:function(){var e=L.control({position:"topleft"});e.onAdd=function(){var e=L.DomUtil.create("div","info");return e.innerHTML='<img src="assets/images/logo-corpocaldas.png" width="139px" height="100px"></img>',e},e.addTo(this.map)}},{key:"addDownloadControl",value:function(){var e=this,t=L.control({position:"topleft"});t.onAdd=function(){var t=L.DomUtil.create("button","btn-control");t.classList.add("leaflet-control","leaflet-control-layers"),t.title="Descargar",t.addEventListener("click",function(){e.downloadLayer()});var n=document.createElement("i");return n.classList.add("pi","pi-download"),t.appendChild(n),t},t.addTo(this.map)}},{key:"addScaleControl",value:function(){var e=L.control.scale({position:"bottomleft"});this.map.addControl(e)}},{key:"addSearchControl",value:function(){var e=L.esri.Geocoding.geosearch({position:"topright",placeholder:"Buscar lugares o direcciones"}).addTo(this.map),t=L.layerGroup().addTo(this.map);e.on("results",function(e){t.clearLayers(),console.log(e);for(var n=e.results.length-1;n>=0;n--)t.addLayer(L.marker(e.results[0].latlng))})}},{key:"addZoomControl",value:function(){var e=L.control.zoom({position:"topright"});this.map.addControl(e)}},{key:"downloadLayer",value:function(){1===this.layer.accessGranted?this.downloadShapefile():2===this.layer.accessGranted&&this.haveCredentials()}},{key:"downloadShapefile",value:function(){var e=this;this.dialogService.open(P,{width:"auto",closable:!1,closeOnEscape:!1}).onClose.subscribe(function(t){if(t){e.messageService.add({severity:"success",summary:"Descarga",detail:"En un momento ser\xe1 redirigido a la descarga."});var n=document.createElement("a");n.target="_blank",n.download=e.name,n.href=e.geoServer+e.layer.nameWorkspace.replace(" ","_")+"/ows?service=WFS&version=1.0.0&request=GetFeature&typeName="+e.layer.nameWorkspace.replace(" ","_")+"%3A"+e.name+"&maxFeatures=50&outputFormat=SHAPE-ZIP",document.body.appendChild(n),n.click(),document.body.removeChild(n),n.remove()}else e.messageService.add({severity:"warn",summary:"Descarga",detail:"Debido a que no acept\xf3 los t\xe9rminos de acceso a la informaci\xf3n no podr\xe1 descargarla."})})}},{key:"getLayerInfo",value:function(){var e=this;this.service.getLayerByName(this.name).subscribe(function(t){e.layer=t,e.name=e.layer.referenceName;var n=L.tileLayer.wms(e.geoServer+e.layer.nameWorkspace.replace(" ","_")+"/wms?",{layers:e.name,format:"image/png",transparent:!0}).addTo(e.map);e.layersControl.addOverlay(n,e.layer.name)},function(e){console.error(e)})}},{key:"highlightFeature",value:function(e){e.target.setStyle({weight:5,opacity:1,color:"#DFA612",fillOpacity:1,fillColor:"#FAE042"})}},{key:"infoFeature",value:function(e){var t="";for(var n in e)t+="<b>".concat(n,":</b> ").concat(e[n]," <br>");return t}},{key:"initializeMap",value:function(){var e=L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),t={"Open Street Map":e,"Esri Map":L.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"})};this.map=L.map("map",{center:L.latLng(5.309346,-75.307057),zoomControl:!1,zoom:10,layers:[e]}),this.addLogoControl(),this.layersControl=L.control.layers(t,null,{position:"topleft",collapsed:!1}),this.layersControl.addTo(this.map)}},{key:"resetFeature",value:function(e){e.target.setStyle({weight:3,opacity:.5,color:"black",fillOpacity:.8,fillColor:"transparent"})}},{key:"haveCredentials",value:function(){var e=this;this.confirmService.confirm({message:"\xbfTienes las credenciales para acceder a ".concat(this.layer.name,"?"),acceptLabel:"Si, descargar con token.",rejectLabel:"No, hacer solicitud.",accept:function(){e.verifyTokenAccess()},reject:function(t){t===l.a.REJECT&&e.sendRequestAccessLayer()}})}},{key:"verifyTokenAccess",value:function(){var e=this;this.dialogService.open(j,{width:"50%",data:{layerId:this.layer.id},header:"Verificaci\xf3n de token"}).onClose.subscribe(function(t){null!=t&&e.downloadShapefile()})}},{key:"sendRequestAccessLayer",value:function(){var e=this;this.dialogService.open(_,{width:"50%",data:{layer:this.layer},header:"Petici\xf3n de acceso a ".concat(this.layer.name)}).onClose.subscribe(function(t){null!=t&&e.service.saveAccessRequest(t).subscribe(function(){1===e.layer.accessGranted?e.downloadShapefile():e.messageService.add({severity:"success",summary:"Petici\xf3n de acceso",detail:"La petici\xf3n de acceso fue radicada exitosamente, en el transcurso de las 24 horas se le dar\xe1 acceso"})},function(e){console.log(e)})})}}]),t}(),T.\u0275fac=function(e){return new(e||T)(p.Mb(s.a),p.Mb(F.a),p.Mb(l.b),p.Mb(l.h),p.Mb(d.a))},T.\u0275cmp=p.Gb({type:T,selectors:[["app-viewer"]],features:[p.Ab([l.h,d.a,l.b])],decls:5,vars:0,consts:[["header","Confirmaci\xf3n","icon","pi pi-exclamation-triangle"],[1,"map-container"],[1,"map-frame"],["id","map"]],template:function(e,t){1&e&&(p.Nb(0,"p-confirmDialog",0),p.Nb(1,"p-toast"),p.Sb(2,"div",1),p.Sb(3,"div",2),p.Nb(4,"div",3),p.Rb(),p.Rb())},directives:[J.a,V.a],styles:[".map-container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0}#map[_ngcontent-%COMP%], .map-frame[_ngcontent-%COMP%]{height:100%}"]}),T)}],W=((D=function t(){e(this,t)}).\u0275fac=function(e){return new(e||D)},D.\u0275mod=p.Kb({type:D}),D.\u0275inj=p.Jb({imports:[[s.e.forChild(H)],s.e]}),D),K=i("arFO"),X=((Z=function t(){e(this,t)}).\u0275fac=function(e){return new(e||Z)},Z.\u0275mod=p.Kb({type:Z}),Z.\u0275inj=p.Jb({imports:[[c.b,W,K.b,u.e,u.k,d.c,J.b,V.b,N.b,m.b,h,g.b]]}),Z)}}])}();